{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\chaha\\\\Downloads\\\\react-bootstrap-ecomm\\\\src\\\\Components\\\\Pages\\\\Login.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useRef } from 'react';\nimport classes from './Login.module.css';\nimport { useHistory } from 'react-router-dom';\nimport { cartContext } from '../Store/CartProvider';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login = () => {\n  _s();\n  let enteredpass = useRef();\n  let enteredEmail = useRef();\n  let ctx = useContext(cartContext);\n  let history = useHistory();\n  function countSum(arr) {\n    let sum = 0;\n    for (let i = 0; i < arr.length; i++) {\n      sum = sum + Number(arr[i].price);\n    }\n    return sum;\n  }\n  const submitHandler = e => {\n    e.preventDefault();\n    fetch('https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyB6cX21zeYABpzin7kuVAkvK583neKmfsY', {\n      method: 'POST',\n      body: JSON.stringify({\n        email: enteredEmail.current.value,\n        password: enteredpass.current.value,\n        returnSecureToken: true\n      }),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(res => {\n      if (res.ok) {\n        console.log(ctx);\n        let responce = res.json();\n        responce.then(data => {\n          ctx.setEmail(enteredEmail.current.value);\n          console.log(ctx);\n          console.log(\"idTOken:\", data.idToken);\n          ctx.setToken(data.idToken);\n          localStorage.setItem(\"idToken\", data.idToken);\n          ctx.setIsLoggedIn(true);\n          history.push('/products');\n        }).then(async () => {\n          console.log(ctx);\n          try {\n            let usermailid = enteredEmail.current.value.replace(/[^a-zA-Z0-9 ]/g, '');\n            let responce = await fetch(`https://crudcrud.com/api/46ca903f309649f88fc028d67fb74e65/cart${usermailid}`, {\n              method: 'GET',\n              headers: {\n                'Content-Type': 'application/json'\n              }\n            });\n            let data = await responce.json();\n            console.log(data);\n            ctx.setCartItems({\n              items: data,\n              totalItems: data.length,\n              totalAmount: countSum(data)\n            });\n          } catch (e) {\n            console.log(e);\n            console.log(\"Something went wrong\");\n          }\n        });\n      } else {\n        console.log(res);\n        return res.json().then(data => {\n          let errorMessage = 'Authentication failed!';\n          alert(errorMessage);\n        });\n      }\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: classes.auth,\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.control,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"email\",\n          children: \"Your Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          id: \"email\",\n          ref: enteredEmail\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.control,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"password\",\n          children: \"Your Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          id: \"password\",\n          required: true,\n          ref: enteredpass\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.actions,\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: submitHandler,\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 9\n  }, this);\n};\n_s(Login, \"Z/PkCfBrSFpHvBwD3LFKNJDkZTE=\", false, function () {\n  return [useHistory];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useContext","useRef","classes","useHistory","cartContext","jsxDEV","_jsxDEV","Login","_s","enteredpass","enteredEmail","ctx","history","countSum","arr","sum","i","length","Number","price","submitHandler","e","preventDefault","fetch","method","body","JSON","stringify","email","current","value","password","returnSecureToken","headers","then","res","ok","console","log","responce","json","data","setEmail","idToken","setToken","localStorage","setItem","setIsLoggedIn","push","usermailid","replace","setCartItems","items","totalItems","totalAmount","errorMessage","alert","className","auth","children","fileName","_jsxFileName","lineNumber","columnNumber","control","htmlFor","type","id","ref","required","actions","onClick","_c","$RefreshReg$"],"sources":["C:/Users/chaha/Downloads/react-bootstrap-ecomm/src/Components/Pages/Login.js"],"sourcesContent":["import React, { useContext, useRef } from 'react'\nimport classes from './Login.module.css'\nimport { useHistory } from 'react-router-dom'\nimport { cartContext } from '../Store/CartProvider';\n\nconst Login = () => {\n    let enteredpass = useRef();\n    let enteredEmail = useRef();\n    let ctx = useContext(cartContext);\n    let history = useHistory();\n    function countSum(arr) {\n        let sum = 0;\n        for (let i = 0; i < arr.length; i++) {\n            sum = sum + Number(arr[i].price);\n        }\n        return sum;\n    }\n\n    const submitHandler = (e) => {\n        e.preventDefault();\n\n        fetch(\n            'https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyB6cX21zeYABpzin7kuVAkvK583neKmfsY',\n            {\n                method: 'POST',\n                body: JSON.stringify({\n                    email: enteredEmail.current.value,\n                    password: enteredpass.current.value,\n                    returnSecureToken: true,\n                }),\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n            }\n        )\n            .then((res) => {\n                if (res.ok) {\n                    console.log(ctx);\n                    let responce = res.json();\n                    responce.then((data) => {\n                        ctx.setEmail(enteredEmail.current.value);\n                        console.log(ctx);\n                        console.log(\"idTOken:\", data.idToken);\n                        ctx.setToken(data.idToken);\n                        localStorage.setItem(\"idToken\", data.idToken);\n                        ctx.setIsLoggedIn(true);\n                        history.push('/products')\n                    }).then(async () => {\n                        console.log(ctx);\n                        try {\n                            let usermailid = enteredEmail.current.value.replace(/[^a-zA-Z0-9 ]/g, '');\n                            let responce = await fetch(`https://crudcrud.com/api/46ca903f309649f88fc028d67fb74e65/cart${usermailid}`, {\n                                method: 'GET',\n                                headers: {\n                                    'Content-Type': 'application/json',\n                                },\n                            });\n                            let data = await responce.json();\n                            console.log(data);\n                            ctx.setCartItems({ items: data, totalItems: data.length, totalAmount: countSum(data) })\n                        } catch (e) {\n                            console.log(e);\n                            console.log(\"Something went wrong\");\n                        }\n                    })\n                } else {\n                    console.log(res)\n                    return res.json().then((data) => {\n                        let errorMessage = 'Authentication failed!';\n                        alert(errorMessage);\n                    });\n                }\n            });\n    }\n\n    return (\n        <section className={classes.auth}>\n            <h1>Login</h1>\n            <form >\n                <div className={classes.control}>\n                    <label htmlFor='email'>Your Email</label>\n                    <input type='email' id='email' ref={enteredEmail} />\n                </div>\n                <div className={classes.control}>\n                    <label htmlFor='password'>Your Password</label>\n                    <input\n                        type='password'\n                        id='password'\n                        required\n                        ref={enteredpass}\n                    />\n                </div>\n                <div className={classes.actions}>\n                    <button onClick={submitHandler}>Login</button>\n                </div>\n            </form>\n        </section>\n    )\n}\n\nexport default Login\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}